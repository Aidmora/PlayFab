<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PlayFab Arcade - CpuDefender Edition</title>

  <!-- TensorFlow -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Monoton&display=swap" rel="stylesheet" />

  <!-- CSS (modular) -->
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="css/pong.css" />
  <link rel="stylesheet" href="css/snake.css" />
  <link rel="stylesheet" href="css/cpuDefender.css" />
  <link rel="stylesheet" href="css/tutorial.css" />
</head>

<body>

  <!-- üéÆ SPLASH √âPICO ARCADE -->
  <div id="retro-loader" aria-hidden="true">
    <!-- Part√≠culas flotantes -->
    <div class="splash-particles">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
    </div>

    <div class="crt">
      <div class="logo">PLAYFAB</div>
      <div class="loading-text">INICIANDO SISTEMA...</div>
      <div class="bar" aria-label="Progreso de carga">
        <div class="progress"></div>
      </div>
      <div class="insert-coin">PRESS START</div>
    </div>
  </div>

  <!-- Decoraci√≥n izquierda -->
  <div class="side-decoration left">
    <div class="neon-owl">
      <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path class="owl-body" d="M50,60 Q20,180 100,180 Q180,180 150,60 Q100,10 50,60 Z" fill="none" stroke="#00ff41"
          stroke-width="4" />
        <circle class="owl-eye" cx="70" cy="80" r="15" fill="none" stroke="#ff7b00" stroke-width="3" />
        <circle class="owl-eye" cx="130" cy="80" r="15" fill="none" stroke="#ff7b00" stroke-width="3" />
        <path class="owl-beak" d="M90,100 L110,100 L100,120 Z" fill="none" stroke="#ccff00" stroke-width="3" />
        <path class="owl-wing" d="M40,100 Q10,130 40,160" fill="none" stroke="#00ff41" stroke-width="3" />
        <path class="owl-wing" d="M160,100 Q190,130 160,160" fill="none" stroke="#00ff41" stroke-width="3" />
      </svg>
    </div>
  </div>

  <!-- CABINET -->
  <div class="arcade-cabinet">
    <header>
      <h1>PLAYFAB</h1>
    </header>

    <div class="category-switch">
      <button class="cat-btn active" onclick="switchCategory('minigames', this)">MINIJUEGOS</button>
      <button class="cat-btn" onclick="switchCategory('pro', this)">ARCADE PRO</button>
    </div>

    <div class="screen-container">
      <div class="game-display active-list" id="list-minigames">
        <div class="game-card">
          <img src="Images/ping pong.png" alt="Ping Pong" />
          <h3>PING PONG CLASSIC</h3>
        </div>
        <div class="game-card">
          <img src="Images/snake.png" alt="Snake" />
          <h3>SNAKE RETRO</h3>
        </div>
        <div class="game-card">
          <img src="Images/cpu_defender.png" alt="Cpu Defender" />
          <h3>CPU DEFENDER</h3>
        </div>
      </div>

      <div class="game-display" id="list-pro">
        <div class="game-card">
          <img src="https://images.unsplash.com/photo-1551103782-8ab07afd45c1?auto=format&fit=crop&q=80&w=400"
            alt="Street Fighter" />
          <h3>STREET FIGHTER II</h3>
        </div>
        <div class="game-card">
          <img src="https://images.unsplash.com/photo-1534423861386-85a16f5d13fd?auto=format&fit=crop&q=80&w=400"
            alt="Metal Slug" />
          <h3>METAL SLUG</h3>
        </div>
      </div>
    </div>

    <!-- CONTROL PANEL -->
    <div class="control-panel">
      <button class="btn-side" id="prevBtn" aria-label="Anterior">‚óÄ</button>

      <button class="btn-play" id="playBtn">JUGAR</button>

      <button class="btn-side" id="nextBtn" aria-label="Siguiente">‚ñ∂</button>

      <!-- ‚öôÔ∏è Bot√≥n de ayuda - Engranaje brillante -->
      <div class="settings-wrapper">
        <button class="btn-settings" id="settingsBtn" aria-label="Ayuda y opciones" title="Ayuda y opciones">
          <svg class="gear-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2">
            <circle cx="12" cy="12" r="3" />
            <path
              d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
          </svg>
        </button>

        <!-- üéÆ AVISO FLOTANTE ARCADE - Presiona Y -->
        <div class="arcade-hint" id="arcadeHint">
          <span class="arcade-hint-key">Y</span>
          <span class="arcade-hint-text">AYUDA</span>
        </div>

        <!-- Men√∫ (Help + Mute adentro) con teclas -->
        <div class="settings-menu" id="settingsMenu" aria-hidden="true">
          <button class="menu-item" id="openHelpBtn" type="button">
            <span class="mi-icon">?</span>
            <span class="mi-text">Tutorial</span>
            <span class="mi-key">R</span>
          </button>

          <button class="menu-item" id="muteBtn" type="button" aria-label="Mute m√∫sica">
            <span class="mi-icon mi-audio">üîä</span>
            <span class="mi-text">Sonido</span>
            <span class="mi-key">B</span>
          </button>
        </div>
      </div>

      <!-- Para evitar crash si tutorial.js todav√≠a busca #helpBtn -->
      <button id="helpBtn" type="button" style="display:none;" aria-hidden="true" tabindex="-1">help</button>
    </div>
  </div>

  <!-- Decoraci√≥n derecha -->
  <div class="side-decoration right">
    <div class="neon-text-container">
      <h2 class="neon-epn">EPN</h2>
      <p class="neon-sub">POLIT√âCNICA</p>
    </div>
  </div>

  <!-- OVERLAY JUEGO -->
  <div id="game-overlay" class="game-overlay" aria-hidden="true">
    <div class="game-container">
      <div class="game-header">
        <h3 id="game-title">JUGANDO...</h3>

        <div class="ml-switch-container">
          <span class="ml-label">MODO IA</span>
          <label class="switch">
            <input type="checkbox" id="mlToggle" onchange="toggleMLMode()" />
            <span class="slider round"></span>
          </label>
        </div>

        <button class="btn-close" onclick="closeMinigame()">‚úï</button>
      </div>

      <div class="game-area" id="game-area" style="position: relative;">
        <!-- Intro antes de iniciar el juego -->
        <div id="game-intro" class="game-intro" aria-hidden="true">
          <!-- Decoraci√≥n lateral -->
          <div class="game-intro-decor left"></div>
          <div class="game-intro-decor right"></div>

          <div class="game-intro-inner">
            <div class="game-intro-kicker">PREP√ÅRATE</div>
            <h1 id="game-intro-title" class="game-intro-title">JUEGO</h1>
            <div class="game-intro-sub">INICIANDO...</div>
          </div>
        </div>

        <div id="challenge-announcement" class="challenge-overlay" style="display: none;">
          <h1 class="glitch-text" id="announcement-title">ACELERACI√ìN DEL CPU</h1>
          <p id="announcement-subtitle">DIFICULTAD DE IA HABILITADA</p>
        </div>

        <div id="ai-loading" class="challenge-overlay" style="display: none; background: #000; z-index: 200;">
          <div class="spinner"></div>
          <p id="loading-text"
            style="margin-top: 20px; color: #00ff41; font-family: 'Courier Prime'; text-align:center; text-shadow: 0 0 10px #00ff41; font-size: 1rem;">
            INICIANDO...
          </p>
        </div>
      </div>

      <div class="game-footer">
        <span id="game-score">PUNTUACI√ìN: 0000</span>
        <span id="game-info">USA TECLADO Y MOUSE</span>
      </div>
    </div>
  </div>

  <!-- TUTORIAL OVERLAY - ACTUALIZADO CON CONTROLES ARCADE -->
  <div id="tutorial-overlay" class="tutorial-overlay" aria-hidden="true">
    <div class="tutorial-content">
      <div class="tutorial-header">
        <h2>INSTRUCCIONES DE JUEGO</h2>
        <button class="btn-close-tutorial" onclick="closeTutorial()">‚úï</button>
      </div>

      <div class="tutorial-body">
        <!-- COLUMNA IZQUIERDA: MODO PC -->
        <div class="control-column">
          <h3>üñ•Ô∏è MODO PC</h3>

          <div class="game-guide">
            <h4><img src="Images/ping pong.png" onerror="this.style.display='none'"> PING PONG</h4>
            <p><span class="key-highlight">MOUSE</span> o <span class="key-highlight">‚Üë‚Üì</span> Mover paleta</p>
          </div>

          <div class="game-guide">
            <h4><img src="Images/snake.png" onerror="this.style.display='none'"> SNAKE</h4>
            <p><span class="key-highlight">‚Üë‚Üì‚Üê‚Üí</span> o <span class="key-highlight">WASD</span> Mover</p>
          </div>

          <div class="game-guide">
            <h4><img src="Images/cpu_defender.png" onerror="this.style.display='none'"> CPU DEFENDER</h4>
            <p><span class="key-highlight">‚Üë‚Üì‚Üê‚Üí</span> Mover nave</p>
            <p><span class="key-highlight">A</span> Disparar</p>
            <p><span class="key-highlight">S</span> Curar</p>
          </div>

          <div class="game-guide general-controls">
            <h4>‚å®Ô∏è CONTROLES GENERALES</h4>
            <p><span class="key-highlight">ENTER</span> Reiniciar juego</p>
            <p><span class="key-highlight">ESC</span> Cerrar men√∫s</p>
          </div>
        </div>

        <!-- COLUMNA DERECHA: MODO ARCADE -->
        <div class="control-column arcade-column">
          <h3>üïπÔ∏è MODO ARCADE</h3>

          <!-- Controles del men√∫ -->
          <div class="arcade-section">
            <h4>üìã MEN√ö PRINCIPAL</h4>
            <div class="arcade-control-list">
              <div class="arcade-control">
                <span class="arcade-btn stick">‚¨Ö‚û°</span>
                <span>Navegar juegos</span>
              </div>
              <div class="arcade-control">
                <span class="arcade-btn">SELECT</span>
                <span>Seleccionar juego</span>
              </div>
              <div class="arcade-control">
                <span class="arcade-btn yellow">Y</span>
                <span>Abrir ayuda</span>
              </div>
            </div>
          </div>

          <!-- Controles en juego -->
          <div class="arcade-section">
            <h4>üéÆ EN LOS JUEGOS</h4>

            <div class="game-arcade-controls">
              <p class="game-name">PONG & SNAKE</p>
              <div class="arcade-control">
                <span class="arcade-btn stick">PALANCA</span>
                <span>Mover</span>
              </div>
            </div>

            <div class="game-arcade-controls">
              <p class="game-name">CPU DEFENDER</p>
              <div class="arcade-control">
                <span class="arcade-btn stick">PALANCA</span>
                <span>Mover nave</span>
              </div>
              <div class="arcade-control">
                <span class="arcade-btn red">A</span>
                <span>Disparar</span>
              </div>
              <div class="arcade-control">
                <span class="arcade-btn blue">B</span>
                <span>Curar</span>
              </div>
              <div class="arcade-control">
                <span class="arcade-btn">L</span>
                <span>Activar modo IA</span>
              </div>
            </div>
          </div>

          <!-- Controles generales arcade -->
          <div class="arcade-section">
            <h4>üîß GENERAL</h4>
            <div class="arcade-control-list">
              <div class="arcade-control">
                <span class="arcade-btn red">X</span>
                <span>Salir del juego</span>
              </div>
              <div class="arcade-control">
                <span class="arcade-btn">SELECT</span>
                <span>Reiniciar</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer del tutorial con tecla para cerrar -->
      <div class="tutorial-footer">
        <span>Presiona <span class="key-highlight">X</span> o <span class="key-highlight">ESC</span> para cerrar</span>
      </div>
    </div>
  </div>

  <!-- JS (modular) -->
  <script src="js/tutorial.js"></script>
  <script src="js/utils.js"></script>

  <!-- Juegos -->
  <script src="js/snake/snake.js"></script>
  <script src="js/pong/pong.js"></script>

  <!-- CPU Defender -->
  <script src="js/cpuDefender/ai.js"></script>
  <script src="js/cpuDefender/entities.js"></script>
  <script src="js/cpuDefender/ui.js"></script>
  <script src="js/cpuDefender/cpuDefender.js"></script>

  <!-- AUDIO -->
  <script src="js/audioManager.js"></script>

  <!-- Global / Navegaci√≥n -->
  <script src="js/main.js"></script>

    
</body>

</html>