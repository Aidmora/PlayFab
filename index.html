<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PlayFab Arcade - CpuDefender Edition</title>

  <!-- TensorFlow -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Monoton&display=swap" rel="stylesheet" />

  <!-- CSS -->
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="css/pong.css" />
  <link rel="stylesheet" href="css/snake.css" />
  <link rel="stylesheet" href="css/cpuDefender.css" />
  <link rel="stylesheet" href="css/tutorial.css" />
</head>

<body>
  <div id="retro-loader" aria-hidden="true">
    <div class="splash-particles">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
    </div>

    <div class="crt">
      <div class="logo">PLAYFAB</div>
      <div class="loading-text">INICIANDO SISTEMA...</div>
      <div class="bar" aria-label="Progreso de carga">
        <div class="progress"></div>
      </div>
      <div class="insert-coin">PRESS START/ESPACIO</div>
    </div>
  </div>

  <!--B√∫ho fablab -->
  <div class="side-decoration left">
    <div class="neon-owl">
      <svg width="280" height="320" viewBox="0 0 280 320" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <!-- Efecto LED verde -->
                <filter id="glowGreen" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="3" result="blur1" />
                    <feGaussianBlur stdDeviation="6" result="blur2" />
                    <feMerge>
                        <feMergeNode in="blur2" />
                        <feMergeNode in="blur1" />
                        <feMergeNode in="SourceGraphic" />
                    </feMerge>
                </filter>

                <!-- Efecto LED naranja -->
                <filter id="glowOrange" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="3" result="blur1" />
                    <feGaussianBlur stdDeviation="6" result="blur2" />
                    <feMerge>
                        <feMergeNode in="blur2" />
                        <feMergeNode in="blur1" />
                        <feMergeNode in="SourceGraphic" />
                    </feMerge>
                </filter>
            </defs>

            <!-- Contorno principal del b√∫ho - Verde -->
            <g filter="url(#glowGreen)" fill="none" stroke="#39ff14" stroke-width="3" stroke-linecap="round"
                stroke-linejoin="round">

                <!-- Silueta del b√∫ho (cuerpo + cabeza + orejas en un solo trazo) -->
                <path d="M60 180
                         Q40 140 60 100
                         L45 50
                         L80 90
                         Q100 70 140 70
                         Q180 70 200 90
                         L235 50
                         L220 100
                         Q240 140 220 180
                         Q240 240 200 280
                         Q140 310 80 280
                         Q40 240 60 180 Z" />

                <!-- Patas -->
                <path d="M100 280 L85 300 M100 280 L100 305 M100 280 L115 300" />
                <path d="M180 280 L165 300 M180 280 L180 305 M180 280 L195 300" />
            </g>

            <!-- Ojos y pico - Naranja -->
            <g filter="url(#glowOrange)" fill="none" stroke="#ff6b35" stroke-width="3" stroke-linecap="round"
                stroke-linejoin="round">

                <!-- Ojo izquierdo -->
                <circle cx="105" cy="130" r="25" />
                <circle cx="105" cy="130" r="10" />

                <!-- Ojo derecho -->
                <circle cx="175" cy="130" r="25" />
                <circle cx="175" cy="130" r="10" />

                <!-- Pico -->
                <path d="M130 160 L140 185 L150 160" />
            </g>
        </svg>
    </div>
  </div>

  <!-- Arcade -->
  <div class="arcade-cabinet">
    <header>
      <h1>PLAYFAB</h1>
    </header>

    <div class="category-switch">
      <button class="cat-btn active" onclick="switchCategory('minigames', this)">MINIJUEGOS</button>
      <button class="cat-btn" onclick="switchCategory('pro', this)">ARCADE PRO</button>

      <!-- AVISO FLOTANTE ARCADE - Presiona A para cambiar categor√≠a -->
      <div class="category-hint" id="categoryHint">
        <span class="category-hint-key">A</span>
        <span class="category-hint-text">CAMBIAR MODO</span>
      </div>
    </div>

    <div class="screen-container">
      <div class="game-display active-list" id="list-minigames">
        <div class="game-card">
          <img src="image/ping pong.png" alt="Ping Pong" />
          <h3>PING PONG CLASSIC</h3>
        </div>
        <div class="game-card">
          <img src="image/snake.png" alt="Snake" />
          <h3>SNAKE RETRO</h3>
        </div>
        <div class="game-card">
          <img src="image/cpu_defender.png" alt="Cpu Defender" />
          <h3>CPU DEFENDER</h3>
        </div>
      </div>

      <div class="game-display" id="list-pro">
        <div class="game-card">
          <img src="image/feedthemonster.png"
            alt="Feed the Monster" />
          <h3>FEED THE MONSTER</h3>
        </div>
        <div class="game-card">
          <img src="image/quizz_race.jpeg"
            alt="Quizz Race" />
          <h3>QUIZZRACE</h3>
        </div>
        <!-- <div class="game-card">
          <img src="https://images.unsplash.com/photo-1534423861386-85a16f5d13fd?auto=format&fit=crop&q=80&w=400"
            alt="Metal Slug" />
          <h3>METAL SLUG</h3>
        </div> -->
      </div>
    </div>

    <!-- CONTROL PANEL -->
    <div class="control-panel">
      <button class="btn-side" id="prevBtn" aria-label="Anterior">‚óÄ</button>

      <button class="btn-play" id="playBtn">JUGAR</button>

      <button class="btn-side" id="nextBtn" aria-label="Siguiente">‚ñ∂</button>

      <!-- Bot√≥n de ayuda-->
      <div class="settings-wrapper">
        <button class="btn-settings" id="settingsBtn" aria-label="Ayuda y opciones" title="Ayuda y opciones">
          <svg class="gear-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2">
            <circle cx="12" cy="12" r="3" />
            <path
              d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
          </svg>
        </button>

        <!-- AVISO FLOTANTE ARCADE - Presiona Y -->
        <div class="arcade-hint" id="arcadeHint">
          <span class="arcade-hint-key">Y</span>
          <span class="arcade-hint-text">AYUDA</span>
        </div>

        <!-- Men√∫ (Ayuda y Sonido) -->
        <div class="settings-menu" id="settingsMenu" aria-hidden="true">
          <button class="menu-item" id="openHelpBtn" type="button">
            <span class="mi-icon">?</span>
            <span class="mi-text">Tutorial</span>
            <span class="mi-key">R</span>
          </button>

          <button class="menu-item" id="muteBtn" type="button" aria-label="Mute m√∫sica">
            <span class="mi-icon mi-audio">üîä</span>
            <span class="mi-text">Sonido</span>
            <span class="mi-key">B</span>
          </button>
        </div>
      </div>

      <!-- Para evitar crash si tutorial.js todav√≠a busca #helpBtn -->
      <button id="helpBtn" type="button" style="display:none;" aria-hidden="true" tabindex="-1">help</button>
    </div>
  </div>

  <!-- Decoraci√≥n derecha -->
  <div class="side-decoration right">
    <div class="neon-text-container">
      <h2 class="neon-epn">EPN</h2>
      <p class="neon-sub">POLIT√âCNICA</p>
    </div>
  </div>

  <!-- OVERLAY JUEGO -->
  <div id="game-overlay" class="game-overlay" aria-hidden="true">
    <div class="game-container">
      <div class="game-header">
        <h3 id="game-title">JUGANDO...</h3>

        <div class="ml-switch-container">
          <span class="ml-label">MODO IA</span>
          <label class="switch">
            <input type="checkbox" id="mlToggle" onchange="toggleMLMode()" />
            <span class="slider round"></span>
          </label>
        </div>

        <button class="btn-close" onclick="closeMinigame()">‚úï</button>
      </div>

      <div class="game-area" id="game-area" style="position: relative;">
        <!-- Intro antes de iniciar el juego -->
        <div id="game-intro" class="game-intro" aria-hidden="true">
          <div class="game-intro-decor left"></div>
          <div class="game-intro-decor right"></div>

          <div class="game-intro-inner">
            <div class="game-intro-kicker">PREP√ÅRATE</div>
            <h1 id="game-intro-title" class="game-intro-title">JUEGO</h1>
            <div class="game-intro-sub">INICIANDO...</div>
          </div>
        </div>

        <div id="challenge-announcement" class="challenge-overlay" style="display: none;">
          <h1 class="glitch-text" id="announcement-title">ACELERACI√ìN DEL CPU</h1>
          <p id="announcement-subtitle">DIFICULTAD DE IA HABILITADA</p>
        </div>

        <div id="ai-loading" class="challenge-overlay" style="display: none; background: #000; z-index: 200;">
          <div class="spinner"></div>
          <p id="loading-text"
            style="margin-top: 20px; color: #00ff41; font-family: 'Courier Prime'; text-align:center; text-shadow: 0 0 10px #00ff41; font-size: 1rem;">
            INICIANDO...
          </p>
        </div>
      </div>

      <div class="game-footer">
        <span id="game-score">PUNTUACI√ìN: 0000</span>
        <span id="game-info">USA TECLADO Y MOUSE</span>
      </div>
    </div>
  </div>

  <!-- TUTORIAL OVERLAY - MAPEO COMPLETO ARCADE + TECLADO -->
  <div id="tutorial-overlay" class="tutorial-overlay" aria-hidden="true">
    <div class="tutorial-content">
      <div class="tutorial-header">
        <h2>CONTROLES DEL JUEGO</h2>
        <button class="btn-close-tutorial" onclick="closeTutorial()">‚úï</button>
      </div>

      <div class="tutorial-body">
        <!-- SECCI√ìN: CONTROLES GENERALES (NAVEGACI√ìN) -->
        <div class="controls-section">
          <h3 class="section-title">üéÆ NAVEGACI√ìN Y MEN√öS</h3>

          <div class="controls-table">
            <div class="table-header">
              <span class="col-action">ACCI√ìN</span>
              <span class="col-arcade">üïπÔ∏è ARCADE</span>
              <span class="col-keyboard">‚å®Ô∏è TECLADO</span>
            </div>

            <div class="table-row">
              <span class="col-action">Navegar juegos</span>
              <span class="col-arcade"><span class="arcade-btn stick">‚óÄ ‚ñ∂</span></span>
              <span class="col-keyboard"><span class="key-highlight">‚Üê</span> <span class="key-highlight">‚Üí</span></span>
            </div>

            <div class="table-row">
              <span class="col-action">Jugar / Seleccionar</span>
              <span class="col-arcade"><span class="arcade-btn green">SELECT</span></span>
              <span class="col-keyboard"><span class="key-highlight">ENTER</span></span>
            </div>

            <div class="table-row">
              <span class="col-action">Cambiar categor√≠a</span>
              <span class="col-arcade"><span class="arcade-btn red">A</span></span>
              <span class="col-keyboard"><span class="key-highlight">A</span></span>
            </div>

            <div class="table-row">
              <span class="col-action">Men√∫ ayuda</span>
              <span class="col-arcade"><span class="arcade-btn yellow">Y</span></span>
              <span class="col-keyboard"><span class="key-highlight">Y</span> / <span class="key-highlight">H</span></span>
            </div>

            <div class="table-row">
              <span class="col-action">Tutorial (en men√∫)</span>
              <span class="col-arcade"><span class="arcade-btn">R</span></span>
              <span class="col-keyboard"><span class="key-highlight">R</span></span>
            </div>

            <div class="table-row">
              <span class="col-action">Mutear sonido</span>
              <span class="col-arcade"><span class="arcade-btn blue">B</span></span>
              <span class="col-keyboard"><span class="key-highlight">B</span> / <span class="key-highlight">S</span></span>
            </div>

            <div class="table-row">
              <span class="col-action">Cerrar / Salir</span>
              <span class="col-arcade"><span class="arcade-btn red">X</span></span>
              <span class="col-keyboard"><span class="key-highlight">ESC</span> / <span class="key-highlight">X</span></span>
            </div>

            <div class="table-row">
              <span class="col-action">Saltar intro</span>
              <span class="col-arcade"><span class="arcade-btn">START</span></span>
              <span class="col-keyboard"><span class="key-highlight">SPACE</span> / <span class="key-highlight">ENTER</span></span>
            </div>
          </div>
        </div>

        <!-- SECCI√ìN: CONTROLES EN JUEGO -->
        <div class="controls-section">
          <h3 class="section-title">üéØ CONTROLES EN JUEGO</h3>

          <!-- PONG -->
          <div class="game-controls-block">
            <h4 class="game-title"><img src="image/ping pong.png" onerror="this.style.display='none'"> PING PONG</h4>
            <div class="controls-table compact">
              <div class="table-row">
                <span class="col-action">Mover paleta</span>
                <span class="col-arcade"><span class="arcade-btn stick">‚ñ≤ ‚ñº</span></span>
                <span class="col-keyboard"><span class="key-highlight">‚Üë</span><span class="key-highlight">‚Üì</span> / <span class="key-highlight">W</span><span class="key-highlight">S</span> / MOUSE</span>
              </div>
              <div class="table-row">
                <span class="col-action">Activar IA</span>
                <span class="col-arcade"><span class="arcade-btn">L</span></span>
                <span class="col-keyboard"><span class="key-highlight">L</span></span>
              </div>
            </div>
          </div>

          <!-- SNAKE -->
          <div class="game-controls-block">
            <h4 class="game-title"><img src="image/snake.png" onerror="this.style.display='none'"> SNAKE</h4>
            <div class="controls-table compact">
              <div class="table-row">
                <span class="col-action">Mover serpiente</span>
                <span class="col-arcade"><span class="arcade-btn stick">‚óÄ‚ñ≤‚ñº‚ñ∂</span></span>
                <span class="col-keyboard"><span class="key-highlight">‚Üë‚Üì‚Üê‚Üí</span> / <span class="key-highlight">WASD</span></span>
              </div>
              <div class="table-row">
                <span class="col-action">Activar IA</span>
                <span class="col-arcade"><span class="arcade-btn">L</span></span>
                <span class="col-keyboard"><span class="key-highlight">L</span></span>
              </div>
            </div>
          </div>

          <!-- CPU DEFENDER -->
          <div class="game-controls-block">
            <h4 class="game-title"><img src="image/cpu_defender.png" onerror="this.style.display='none'"> CPU DEFENDER</h4>
            <div class="controls-table compact">
              <div class="table-row">
                <span class="col-action">Mover nave</span>
                <span class="col-arcade"><span class="arcade-btn stick">‚óÄ‚ñ≤‚ñº‚ñ∂</span></span>
                <span class="col-keyboard"><span class="key-highlight">‚Üë‚Üì‚Üê‚Üí</span></span>
              </div>
              <div class="table-row">
                <span class="col-action">Disparar</span>
                <span class="col-arcade"><span class="arcade-btn red">A</span></span>
                <span class="col-keyboard"><span class="key-highlight">A</span></span>
              </div>
              <div class="table-row">
                <span class="col-action">Curar</span>
                <span class="col-arcade"><span class="arcade-btn blue">B</span></span>
                <span class="col-keyboard"><span class="key-highlight">S</span></span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer del tutorial -->
      <div class="tutorial-footer">
        <span>üïπÔ∏è Usa la <strong>PALANCA</strong> o <span class="key-highlight">‚Üë‚Üì</span> para hacer scroll</span>
        <span class="separator">|</span>
        <span>Presiona <span class="key-highlight">X</span> / <span class="key-highlight">ESC</span> para cerrar</span>
      </div>
    </div>
  </div>

  <!-- JS (modular) -->
  <script src="js/tutorial.js"></script>
  <script src="js/utils.js"></script>

  <!-- Juegos -->
  <script src="js/snake/snakeAI.js"></script>
  <script src="js/snake/snake.js"></script>
  <script src="js/pong/pong.js"></script>

  <!-- CPU Defender -->
  <script src="js/cpuDefender/ai.js"></script>
  <script src="js/cpuDefender/entities.js"></script>
  <script src="js/cpuDefender/ui.js"></script>
  <script src="js/cpuDefender/cpuDefender.js"></script>

  <!-- AUDIO -->
  <script src="js/audioManager.js"></script>

  <!-- Global / Navegaci√≥n -->
  <script src="js/main.js"></script>

    
</body>

</html>